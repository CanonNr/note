# Nginx的反向代理

## 正向代理和反向代理

### 正向代理

​	**正向代理**是一个位于客户端和目标服务器之间的代理服务器(中间服务器)。为了从原始服务器取得内容，客户端向代理服务器发送一个请求，并且指定目标服务器，之后代理向目标服务器转交并且将获得的内容返回给客户端。

​	也就是所谓的翻墙，本地无法直接访问谷歌我就可以找一个可以访问的中间人（代理服务器）带着我们的问题去访问谷歌，谷歌回答了问题后中间人又将答案发回给我们。

![img](..\static\v2-07ededff1d415c1fa2db3fd89378eda0_hd.jpg)

### 反向代理

​	**反向代理**正好相反。对于客户端来说，反向代理就好像目标服务器。并且客户端不需要进行任何设置。客户端向反向代理发送请求，接着反向代理判断请求走向何处，并将请求转交给客户端，使得这些内容就好似他自己一样，一次客户端并不会感知到反向代理后面的服务，也因此不需要客户端做任何设置，只需要把反向代理服务器当成真正的服务器就好了。

![img](..\static\v2-816f7595d80b7ef36bf958764a873cba_hd.jpg)

### 区别

​	正向代理需要你主动设置代理服务器ip或者域名进行访问，由设置的服务器ip或者域名去获取访问内容并返回；而反向代理不需要你做任何设置，直接访问服务器真实ip或者域名，但是服务器内部会自动根据访问内容进行跳转及内容返回，你不知道它最终访问的是哪些机器。

​	正向代理获取不到客户端IP；

​	反向代理获取不到服务端IP；

### 两者用处

* 正向代理
  * 我只知道**翻墙**
* 反向代理
  * 保护和隐藏服务器
  * 负载均衡
  * 缓存静态内容
  * 安全

#### 保护和隐藏服务器

![1555751949189](..\static\1555751949189.png)

#### 负载均衡

![1555751898376](..\static\1555751898376.png)



